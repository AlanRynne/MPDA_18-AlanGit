---
title: "Geodesic Patterns"
subtitle: "for Freeform Architecture"
author: "Alan Rynne"
date: "September 2018"
institute: "UPC - MPDA'18"
bibliography: [input/MPDABibliography.bib]

# Beamer
latex-engine: xelatex
theme: metropolis
colortheme: dove
fonttheme: serif
fontsize: 8pt
logo: "../resources/images/logos/MPDA-logo3.png"

# Reveal.js styles
css: ../slides/slides.css
# Other options
header-includes:
  \usepackage{algorithmic}
  \usepackage{svg}
  \usepackage{svgcolor}
  \usepackage{pgfpages}
  \usepackage{caption}
  \renewcommand{\algorithmicrequire}{\textbf{Input:}}
  \renewcommand{\algorithmicensure}{\textbf{Output:}}

---

## Index

1. [Objective](#objective)
2. [Background](#background)
3. [Construction technique](#construction-technique)
4. [Algorithmic strategies](#algorithmic-strategies)
5. [The parallel transport method](#the-parallel-transport-method)
6. [The Evolution Method](#the-evolution-method)
7. [The Piecewise Evolution Method](#the-piecewise-evolution-method)
8. [The level set method](#the-level-set-method)
9. [Modeling planks](#modeling-planks)
10. [Optimization](#optimization)
11. [Analysis](#analysis)
12. [Conclusion](#conclusion)
13. [Thanks [^acknowledgments]](#thanks-acknowledgments)
14. [Appendix](#appendix)

# Objective

---

Discretize a given freeform surface into planks with the following properties:

1. Must be ***developable*** [@shelden2002digital]

2. Should tend to have approximate ***equal width***  

3. Should be ***as straight as possible***

4. Cannot bend by their strong axis but,
   
5. can have a twist and bend by their weak axis

---

Plank
: A plank is timber that is flat, elongated, and rectangular with parallel faces that are higher and longer than wide. ([Wikipedia](https://en.wikipedia.org/wiki/Plank_(wood)))

![A straight plank laying on a cylinder on different directions.](resources/images/vector/CylinderPlaks.svg){#fig:cylinderPlanks}

# Background

---

The use of *straight developable planks* is widely used in:

![Traditional boat building](http://woodboatbuilder.com/maid-planking/sm13planks.jpg){width=60%}

---

Also common practice in naval engineering industry:

![Connected developable patches for boat hull design](https://github.com/AlanRynne/MPDA_18-MasterThesis/raw/master/slides/slideImages/developableHull.jpeg){width=70%}

---

NOX was one of the first to experiment with paper strips.

> MISSING NOX IMAGE/REFERENCE!

## Frank Ghery

This techniques have also been used in the architecture world, mainly by **Frank Ghery**.

His façades are usually a collection of connected developable surfaces.

---

Latest architectural work following this techniques was:

![Burj Khalifa by Frank Ghery](https://cdn.archpaper.com/wp-content/uploads/2012/04/BurjKhalifa05.jpg){width=60%}

---

:::::::::{.columns}
:::{.column width=65%}
It was designed as a collection of:

* **Developable surfaces**
  * *Which can be covered by equal width planks*  
* **Surfaces of constant curvature**  
  * *Which can be covered by repeating the same profile*  

:::
:::{.column width=35%}

![](https://www.dw.com/image/19172478_303.jpg)

:::
:::::::::

---

![Burj Khalifa final panel solution](https://cdn.archpaper.com/wp-content/uploads/2012/04/BurjKhalifa14.jpg){#fig:burjKhalifa width=100%}

# Construction technique

## Geodesic curves

A geodesic curve is the generalization of a *straight line* into *curved spaces*.

In this research, we concentrate on the concept of ***straightest geodesics***.

:::::::::{.columns}
:::{.column width=50%}
### Some markdown content
:::
:::{.column width=50%}
![Shortest geodesic on a torus](resources/images/vector/ShortestGeodesics.svg){#fig:shortestGeod}
:::
:::::::::


## Developable surfaces

![Surfaces with ***0 gaussian curvature***. Meaning, they can be flattened onto a plane ***without distortion***](resources/images/vector/DevelopableFromCurve.svg){#fig:devFromCurve}

---

> Developable surfaces
> : \
>   
>   * surfaces that can be flattened.
>   * can be generated by a single curve.  

> Geodesic curves
> : \
>   
>   * are straight lines in a curved space.

---

If
: Panels are generated using geodesic curves on the surface

Then
: Resulting panels will be ***developable*** and mostly ***straight*** when flat.

![A straight plank laying on a hyperbolic paraboloid](resources/images/vector/HyparPlanks.svg){#fig:hyparPlank width=40%}

---

In other words
: \
  
  We wish to cover a given freeform surface with a pattern of **geodesic curves** with equal spacing.

  This can only be achieved if the provided surface is already *developable*.\
  \
  A compromise exists between the *curve spacing* and the *curve's geodesic curvature*

# Algorithmic strategies

## Obtaining Geodesic Patterns

These are the main methods for the obtaining successful geodesic patterns:

1. The ***parallel transport*** method
2. The ***evolution*** method
    1. The ***piecewise geodesic*** evolution method
3. The ***level-set*** method

# The parallel transport method

## Vector parallel transport

![Parallel transport of a vector over a path on a sphere](resources/images/vector/SpherePT.svg){#fig:ptSphere width=50%}

---

![Parallel transport over two adjacent mesh faces](resources/images/vector/Diagram-ParallelTransport.svg){#fig:ptDiagram}

## P.T. Implementation

\small
\begin{algorithmic}[1]
\REQUIRE A surface $\Phi$, represented as a triangular mesh (V,E,F)
\ENSURE Set of geodesic curves $g_i,\quad where \quad i=0,...,M$
\STATE Place a geodesic curve $g_x$ along $S$ such that it divides the surface completely in 2.
\STATE Divide the curve into $N$ equally spaced points $p$ with distance $W$.
\STATE Place an vector $\mathbf v$  onto $p_0$
\STATE Parallel transport that vector along $g_x$ as described in [@fig:parTransProc].
\FORALL {points $p_i$ where i = 0,...,M}
  \STATE Generate geodesic curve $+g_i$ and $-g_i$ using vector $\mathbf{v}_i$ and $\mathbf{-v}_i$ respectively.
  \STATE Join $+g_i$ and $-g_i$ together to obtain $g_i$
  \STATE Add $g_i$ to output.
\ENDFOR
\end{algorithmic}

---

There are **three** *extreme* cases depending on the ***local gaussian curvature*** where $g$ lies on $\Phi$:

Positive curvature
: Panels will have **Maximum width** on $g$

Negative curvature
: Panels will have **Minimum width** on $g$

0 gaussian curvature:
: Panels will be  of equal width

## P.T. Example

![Parallel transport method over a positive curvature surface](resources/images/vector/ParallelTransportMethod.svg){#fig:ptPositiveCurvature}

## P.T. Results

![TNB generated panels & distance to original mesh](resources/images/vector/PTPanels&DistanceToMesh.svg){#fig:ptPanels}

# The Evolution Method

---

![Calculating the best-fit geodesic](resources/images/vector/Diagram-BestFitGeodesic.svg){#fig:bestFitGeodesic}

## Evolution Implementation

\small
\begin{algorithmic}[1]
\REQUIRE A surface $\Phi$, represented as a triangular mesh (V,E,F)
\ENSURE Set of geodesic curves $g_i,\quad where \quad i=0,...,M$
\STATE Place a geodesic curve $g_x$ along $S$ such that it divides the surface completely in 2.
\STATE Divide the curve into $N$ equally spaced points $p$ with distance $W$.
\STATE Place an vector $\mathbf v$  onto $p_0$
\STATE Parallel transport that vector along $g_x$ as described in [@fig:parTransProc].
\FORALL {points $p_i$ where i = 0,...,M}
\STATE Generate geodesic curve $+g_i$ and $-g_i$ using vector $\mathbf{v}_i$ and $\mathbf{-v}_i$ respectively.
\STATE Join $+g_i$ and $-g_i$ together to obtain $g_i$
\STATE Add $g_i$ to output.
\ENDFOR
\end{algorithmic}

## Evolution Method Results

:::::::::{.columns}
:::{.column width=50%}
![Evolution method example](resources/images/png/CuttyEvolutionMethod.png){#fig:evolutionExample}
:::
:::{.column width=50%}
![Evolution method problems](resources/images/png/CuttyEvolutionMethod2.png){#fig:evolutionProblems}
:::
:::::::::

---

Local changes in curvature produce:

* Sharp panel endings in positive curvature areas
* Panel width increase in negative curvature areas

# The Piecewise Evolution Method

---

![Calculating the best piece-wise geodesic](resources/images/vector/Diagram-PieceWiseGeodesic.svg){#fig:bestPiecewiseGeodesic}

## Piecewise Ev. Implementation

> INSERT ALGORITHM HERE

## Piecewise Ev. Results

:::::::::{.columns}
:::{.column width=50%}
![Piecewise Test](resources/images/png/PiecewiseTestView2.png){#fig:piecewiseTestView2}
:::
:::{.column width=50%}
![Piecewise Test](resources/images/png/PiecewiseTest.png){#fig:piecewiseTest}
:::
:::::::::

# The level set method

## Mesh Level-sets

![Level set on a single mesh face](resources/images/vector/LevelSet-SingleTriangle.svg){#fig:levelSetFace}

## Level-set Implementation

> INSERT ALGORITHM HERE

## Results

:::::::::{.columns}
:::{.column width=50%}
MISSING TEXT
:::
:::{.column width=50%}
> MISSING IMAGE
:::
:::::::::

# Modeling planks

### Tangent-developable method

---

:::::::::{.columns}
:::{.column width=50%}
Given any point in $g$:

1. Assuming $T(x)$ is tangent $g$.  
2. Compute $U(x)$ as $T(x)\times N_\Phi(x)$

> The union of all $U(x)$ is a developable ruled surface $\Psi$.
:::
:::{.column width=50%}
![Tangent developable method for panels](resources/images/vector/Panels-TangentDevelopable.svg){#fig:tangDevPanels}
:::
:::::::::


---

Initial algorithm is as follows:

> For all geodesics $s_i$ in a given pattern:

1. Compute the *tangent developable surfaces* $\rightarrow\Psi_i$
2. Trim $\Psi_i$ along the intersection curves with their respective neighbours.
3. Unfold the trimmed $\Psi_i$, obtaining the panels in flat state.

***Unfortunately***, this method needs to be refined in order to work in practice because:

1. The rulings of tangent developable may behave in weird ways
2. The intersection of the neighboring $\Psi_i$'s is often *ill-defined*.

---

Therefore, the procedure was modified in the following way:

1. Compute the *tangent developable surfaces* $\Psi_i$ for all surfaces $s_i \rightarrow i=\text{even numbers}$
2. Delete all rulings where the angle enclose with the tangent $\alpha$ is smaller than a certain threshold (i.e. 20º).
3. Fill the holes in the rulings by interpolation (???)
4. On each ruling:
  1. Determine points $A_i(x)$ and $B_i(x)$ which are the closest to geodesics $s_{i-1}$ and $s_{i+1}$. This serves for trimming the surface $\Psi_i$.
5. Optimize globally the positions of points $A_i(x)$ and $B_i(x)$ such that
  1. Trim curves are *smooth*
  2. $A_i(x)$ and $B_i(x)$ are close to geodesics $s_{i-1}$ and $s_{i+1}$
  3. The ruling segments $A_i(x)B_i(x)$ lies close to the *original surface* $\Phi$

---

![Panels computed using the using the modified tangent developable method.](resources/images/vector/Panels-TangentDevelopableModified.svg){#fig:tangentDevMethod}

# Optimization

## Piecewise geodesic vector-fields

[^PottmanPatterns]: Image taken from @Pottmann2010-ku

![Geodesic pattern example[^PottmanPatterns]](resources/images/GeodPatterns/geodPattern-figure-01.png){#fig:geodFieldExample}

---

The objective is to divide or *cut* the mesh into areas that will be easilly covered by a 1-pattern of geodesics [^PottmanPatterns].


:::::::::{.columns}
:::{.column width=50%}
![User specified directions](resources/images/GeodPatterns/geodPattern-figure-32.png){#fig:geodFieldUser}
:::
:::{.column width=50%}
![Computed geodesic vector field & cuts](resources/images/GeodPatterns/geodPattern-figure-33.png){#fig:geodFieldCuts}
:::
:::::::::

This is done by computing a *geodesic vector field* over the surface, in a way that it aligns with several user specified directions.

## Developability of triangle meshes


[^KraneDevelop]: Image taken from @Stein2018DSF

Different methods for *developalizing* meshes have been developed over the years:

![Left  to  right: @julius2005d, @mitani2004making, @shatz2006paper @liu2006geometric  and @Stein2018DSF [^KraneDevelop]](resources/images/developability/developability-figure-04.png){#fig:developabilityTechniques}

---

![Developability of the Stanford Bunny [@Stein2018DSF][^KraneDevelop]](resources/images/developability/developability-figure-20.png){#fig:developableBunny height=70%}

---

![Noisy to smooth sheet [@Stein2018DSF][^KraneDevelop]](resources/images/developability/developability-figure-08.png){#fig:noisyVSsmooth}

---

![Developalizing a sphere. Results highly depend on the initial mesh topology[^KraneDevelop]](resources/images/developability/developability-figure-02.png){#fig:developableSpheres}

---

Energy applied is equivalent to forcing all vertices *angle defect* to be 0.

![Any given vertex on a mesh (left) will become either flat (centre) or a hinge (right)[^KraneDevelop]](resources/images/developability/developability-figure-12.png){#fig:developableSpheres2}

This will automatically create *hinges* in the vertices where it is not possible to be flat.

---

![Different threshold configurations[^KraneDevelop]](resources/images/developability/developability-figure-18.png){#fig:developabilityThreshold}

# Analysis

## Gaps in panelization

> ???

## Stress in panels

> **Assuming the material:**

* is bent to the shape of a ruled surface $\Psi$
* the central line $m$ of the plank follows the *'middle geodesic'* in $\Psi$.\
\

> **Then:**

* Lines parallel to $m$ at distance $d/2$ are not only bent but also stretched.

---

If we introduce the radius of Gaussian curvature $\rho = 1 / \sqrt{|K|}$

the relative increment in length $\varepsilon$ (strain) of the strip is:

$$\varepsilon=\frac{1}{2}(d/2\rho)^2+\cdots $$ {#eq:strain}

where $d$ is the planks width.

---

### Tensile stress

Tensile stress can be expressed as $\sigma = E\varepsilon$[^safety], which yields:

$$ d/2\rho\leq C,\quad{with}\quad{C=\sqrt{\sigma _{max}/E}}$$

$$\sigma_{max} = \text{maximum admissible stress}$$
$$E = \text {Young's modulus}$$ 

[^safety]: Since this calculation is an approximation, a safety factor must be used when choosing $\sigma_{max}$.

---

$$ d/2\rho\leq C,\quad{with}\quad{C=\sqrt{\sigma _{max}/E}}$$

Since $C$ is a material constant. We obtain the maximum admissible width with:

$$d_{max} = 2\rho_{min}C$$

---

> Maybe missing an image here?

|  Material |  Young Modulus | Max. stress | $C$ |
|---|---|---|---|
| Wood | 200000  |   |   |
| Steel | 13000  |   |   |
| Others? | ? | | |
: Example calculation of constant $C$ for some of the most suitable materials.

## Bending and shear stress

> **Only for panels with thin rectangular cross-sections ($h/d \ll 1$)**

Bending ($\sigma$) and shear stresses ($\tau$) depend on:

Panel thickness $h$ but ***not*** on the panel width $d$.

---

Maximum values occur on the outer surface of the panel [@Wallner2010tiling] and depend on:

* the curvature $\kappa$ of the central geodesic
* the rate of torsion $\theta$  of the panel.

> $$\sigma = E \kappa h/2 \quad and\quad \tau = hG\theta$${#eq:bendingAndShear}

Where $G$ is the shear modulus.

---

$\tau$, measured by arc per meter, does not exceed $\sqrt{|K|} = 1/\rho$, 

maximum value ocurs if:

* the central geodesic's tangent is an asymptotic direction of the panel surface [@DoCarmo2016kx].

---

It is standard procedure to combine all streses (tension, shear, bending) and use this information for checking panel admissibility.

INSERT RESULTS!!!

# Conclusion

---

```{.mermaid width=3000 theme='neutral'}
graph LR
A[Choose a method]
C[Parallel Transport]
D[Evolution]
E[Piecewise Evolution]
F[Level-sets]
G[Geodesic Vector Fields]
H(Triangle mesh developability)

subgraph Simple Surfaces
C
D
F
end

subgraph Shape Optimization
H
end

subgraph Pattern Generation
C
F --> G
C --> D
D --> E
end

C --> I[Results are satisfactory? ]
D --> I
F --> I
G --> I
E --> I
I --> |No|H
I --> |Yes| Finish!
H --> J[Start Again]
```

---

> * Parallel transport method is ONLY usefull when surfaces are developable or *nearly* developable.
> * Evolution Method improves upon it's predecessor but still lacks the ability to maintain equal thickness over complex surfaces.
> * *Piecewise* evolution method gives the best results overall.
> * *Level-set method* can be used to calculate geodesic webs.
>   * To cover freeform surfaces it need to be coupled with the geodesic-vector field technique.
> * *Geodesic vector fields* is an introductory step to cut the mesh into pieces that will be easily covered by a 1-pattern of geodesic curves.
> * *Developalizing* the surface is an extreme measure, since during the process, the overall smoothness of the surface will be lost. It can still be done in a controlled manner to reduce areas of high curvature.

[^acknowledgments]: Special thanks to ... FILL IN LATER!  
  \
  \

# Thanks [^acknowledgments]
  
# Appendix

## Resources

> PUT LINKS TO GH COMPONENTS HERE + OTHER NICE SOFTWARE!

## References {.allowframebreaks}

